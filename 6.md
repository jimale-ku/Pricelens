6. STATE MANAGEMENT - Data Flow
Global State (App.tsx level)
// Authentication State
isAuthenticated: boolean
userEmail: string

// App-wide Settings
zipcode: string (persisted to localStorage)
sortBy: 'price' | 'distance' (persisted to localStorage)
customStores: { id: string; name: string }[] (persisted)

// Feature State
groceryList: GroceryListItem[] (persisted)
isPlusSubscriber: boolean (persisted)
activeTab: string (current visible category)

// Search State
searchQuery: string (grocery search)
generalSearchQuery: string (universal search)
selectedCategory: string (filter)
selectedStores: string[] (filter)
Local State (Component level)
Each category component manages:
// Pattern A (Two-Level System)
selectedCategory: string | null  // Which subcategory is active

// Pattern B (Table Comparison)
zipCode: string
serviceType: string
results: any[]
loading: boolean

// Pattern C (Service Listings)
serviceType: string
location: string
listings: any[]
Data Flow Example
User Action: Add item to grocery list
    ↓
ProductComparison component calls: onAddToList(product)
    ↓
App.tsx handler: handleAddToList(product)
    ↓
Updates state: setGroceryList([...groceryList, newItem])
    ↓
useEffect hook triggers
    ↓
Saves to localStorage: localStorage.setItem('pricelens-grocery-list', JSON.stringify(list))
    ↓
GroceryList component re-renders with new item
    ↓
Badge count updates on "My List" tab
localStorage Keys Used
'pricelens-authenticated': 'true' | null
'pricelens-user': JSON.stringify({ email, name, joinedDate })
'pricelens-zipcode': string
'pricelens-custom-stores': JSON.stringify([{ id, name }])
'pricelens-grocery-list': JSON.stringify([GroceryListItem])
'pricelens-plus-subscription': JSON.stringify(boolean)
